<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>qq空间说说发表</title>
    <link rel="stylesheet" href="css/common.css">
</head>
<body>
<div id="message">
    <P>有什么新鲜事想告诉大家？</P>
    <!-- DIV属性contenteditable="true"把div变成可编辑输入框 -->
    <!-- 编辑区域 -->
    <div class="edit" contenteditable="true"></div>
    <div class="but">
        <img src="images/bba_thumb.gif" class="imgface">
        <span class="msg_but">发表</span>
        <div class="face">
            <ul>
                <li><img src="images/bba_thumb.gif"></li>
                <li><img src="images/88_thumb.gif"></li>
                <li><img src="images/angrya_thumb.gif"></li>
                <li><img src="images/bs_thumb.gif"></li>
                <li><img src="images/bs2_thumb.gif"></li>
                <li><img src="images/bz_thumb.gif"></li>
                <li><img src="images/cake.gif"></li>
                <li><img src="images/cj_thumb.gif"></li>
                <li><img src="images/cool_thumb.gif"></li>
                <li><img src="images/crazya_thumb.gif"></li>
            </ul>
        </div>
    </div>
</div>

<!-- 评论列表展示 -->
<div class="msgBox">
    <!--<div class="msgInfo">-->
        <!--&lt;!&ndash; 自定义列表标签 &ndash;&gt;-->
        <!--<dl>-->
            <!--&lt;!&ndash; 标题 &ndash;&gt;-->
            <!--<dt><img src="images/tz.jpg"></dt>-->
            <!--<dd>啦啦啦</dd>-->
        <!--</dl>-->
        <!--<div class="con">-->
            <!--拉了拉-->
        <!--</div>-->
    <!--</div>-->
</div>

<script src="js/jquery-1.10.2.min.js"></script>
<script type="text/javascript">
    // 展开表情
    $('.imgface').click(function (e) {
        // 慢慢向下展开
        $('.face').slideDown();
        // face向下展开又立即收缩（涉及“冒泡事件”：点击.imgface，向上一层看，又相当于点击了document，因此两个方法都会执行）
        // 解决方法：利用事件对象组织冒泡事件
        e.stopPropagation();
    });
    // 点击任何地方包括face里的小图标和外面的其他地方
    $(document).click(function () {
        // 向上收缩
        $('.face').slideUp();
    });
    // 点击表情
    $('.face ul li').click(function () {
        var _img=$(this).find('img').clone();  //clone克隆 当前 img标签； find 查找 找到
        console.log(_img);
        $('.edit').append(_img); // 向后追加
    });
    // 点击“发表”按钮
    $('.msg_but').click(function () {
        // .html()获取当前编辑区域的内容（包括标签）
        var _txt=$('.edit').html();
        if(_txt == ''){
            $('.edit').focus();  // 让输入框获取光标
        }else{
            $('.msgBox').append('<div class="msgInfo"><dl><dt><img src="images/tz.jpg"></dt><dd>啦啦啦</dd></dl><div class="con">'+_txt+'</div></div>');
            // 发表完清空输入框
            $('.edit').html('');
        }
    });
</script>
</body>
</html>